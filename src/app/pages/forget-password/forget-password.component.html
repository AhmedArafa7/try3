<!-- Header -->
<h1 class="text-4xl text-center text-white bg-teal-700 w-full font-bold py-6 shadow-md">
  Forgot Password
</h1>

<!-- Container -->
<section class="w-11/12 max-w-lg mx-auto mt-6 p-6 bg-white border rounded-2xl shadow-xl">

  <p class="text-2xl font-semibold text-gray-800 text-center mb-6">Reset Your Password</p>

  @switch (step) {
    @case (1) {
      <!-- Step 1: Enter Email -->
      <form [formGroup]="verifayEmail" (ngSubmit)="verifayEmailSubmit()" class="text-center space-y-4">
        <div class="relative">
          <i class="fa-solid fa-envelope absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
          <input type="text" formControlName="email"
            class="pl-10 pr-4 py-3 w-full border border-gray-300 rounded-xl focus:ring-2 focus:ring-teal-500 focus:outline-none"
            placeholder="Enter your email">
        </div>

        @if (verifayEmail.get('email')?.errors && verifayEmail.get('email')?.touched) {
          <div class="text-left text-sm text-red-600 bg-red-100 p-3 rounded-md">
            <ul class="list-disc pl-5">
              @if (verifayEmail.get('email')?.getError('required')) { <li>Email is required</li> }
              @if (verifayEmail.get('email')?.getError('minlength')) { <li>Email must be at least 3 characters</li> }
              @if (verifayEmail.get('email')?.getError('maxlength')) { <li>Email must be at most 20 characters</li> }
            </ul>
          </div>
        }

        <button [disabled]="verifayEmail.invalid"
          class="w-full bg-teal-600 text-white font-semibold py-3 rounded-xl hover:bg-teal-700 transition">
          Verify Email
        </button>
      </form>
    }

    @case (2) {
      <!-- Step 2: Verify Code -->
      <form [formGroup]="verifayCode" (ngSubmit)="verifayCodeSubmit()" class="text-center space-y-4">
        <div>
          <label for="resetCode" class="block text-left text-gray-700 font-medium mb-1">Verification Code</label>
          <div class="relative">
            <i class="fa-solid fa-key absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
            <input type="number" formControlName="resetCode"
              class="pl-10 pr-4 py-3 w-full border border-gray-300 rounded-xl focus:ring-2 focus:ring-teal-500 focus:outline-none"
              placeholder="Enter the code sent to your email">
          </div>
        </div>

        @if (verifayCode.get('resetCode')?.errors && verifayCode.get('resetCode')?.touched) {
          <div class="text-left text-sm text-red-600 bg-red-100 p-3 rounded-md">
            <ul class="list-disc pl-5">
              @if (verifayCode.get('resetCode')?.getError('required')) { <li>Code is required</li> }
              @if (verifayCode.get('resetCode')?.getError('minlength')) { <li>Code must be at least 3 digits</li> }
              @if (verifayCode.get('resetCode')?.getError('maxlength')) { <li>Code must be at most 20 digits</li> }
            </ul>
          </div>
        }

        <button [disabled]="verifayCode.invalid"
          class="w-full bg-teal-600 text-white font-semibold py-3 rounded-xl hover:bg-teal-700 transition">
          Verify Code
        </button>
      </form>
    }

    @case (3) {
      <!-- Step 3: Reset Password -->
      <form [formGroup]="resetPassword" (ngSubmit)="restPasswordSubmit()" class="text-center space-y-4">
        <!-- Email -->
        <div>
          <label for="email" class="block text-left text-gray-700 font-medium mb-1">Email</label>
          <div class="relative">
            <i class="fa-solid fa-envelope absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
            <input type="text" formControlName="email"
              class="pl-10 pr-4 py-3 w-full border border-gray-300 rounded-xl focus:ring-2 focus:ring-teal-500 focus:outline-none"
              placeholder="Enter your email">
          </div>
        </div>

        <!-- Password -->
        <div>
          <label for="newPassword" class="block text-left text-gray-700 font-medium mb-1">New Password</label>
          <div class="relative">
            <i class="fa-solid fa-lock absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
            <input type="password" formControlName="newPassword"
              class="pl-10 pr-4 py-3 w-full border border-gray-300 rounded-xl focus:ring-2 focus:ring-teal-500 focus:outline-none"
              placeholder="Enter new password">
          </div>
        </div>

        @if (resetPassword.get('newPassword')?.errors && resetPassword.get('newPassword')?.touched) {
          <div class="text-left text-sm text-red-600 bg-red-100 p-3 rounded-md">
            <ul class="list-disc pl-5">
              @if (resetPassword.get('newPassword')?.getError('required')) { <li>Password is required</li> }
              @if (resetPassword.get('newPassword')?.getError('minlength')) { <li>Password must be at least 3 characters</li> }
              @if (resetPassword.get('newPassword')?.getError('maxlength')) { <li>Password must be at most 20 characters</li> }
            </ul>
          </div>
        }

        <button [disabled]="resetPassword.invalid"
          class="w-full bg-teal-600 text-white font-semibold py-3 rounded-xl hover:bg-teal-700 transition">
          Reset Password
        </button>
      </form>
    }
  }

  <!-- Bottom Link -->
  <div class="flex flex-col items-center justify-center mt-6 text-sm text-gray-600">
    <p class="mb-2">Or</p>
    <a routerLink="/login" class="text-teal-600 hover:underline">I remember now</a>
  </div>
</section>
